<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
    <meta name="theme-color" content="#1a1a1a">
    <meta name="description" content="Clemi 2.0 - Digitale Stempelp√§sse f√ºr Habit-Tracking">

    <!-- iOS specific meta tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Clemi 2.0">

    <title>Clemi 2.0</title>

    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="css/styles.css">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="assets/icons/icon.svg">
</head>
<body>
    <!-- Header -->
    <header class="app-header">
        <div class="header-left">
            <button class="settings-btn" id="settingsBtn" aria-label="Einstellungen">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="3"></circle>
                    <path d="M12 1v6m0 6v6m6-12l-6 6m0 0l-6 6m12 0l-6-6m0 0l-6-6"></path>
                    <path d="M3.34 8.68a10 10 0 0 1 17.32 0m0 6.64a10 10 0 0 1-17.32 0"></path>
                </svg>
            </button>
            <span class="app-title">Clemi 2.0</span>
        </div>
        <button class="dietzie-counter" id="dietzieCounter" aria-label="Dietzie-Konto">
            <span class="dietzie-icon">üç∫</span>
            <span class="dietzie-count" id="dietzieCount">0</span>
        </button>
    </header>

    <!-- Main Content -->
    <main class="app-main">
        <!-- Card Carousel Container -->
        <div class="carousel-container">
            <div class="carousel-track" id="carouselTrack">
                <!-- Cards will be dynamically inserted here -->
            </div>
        </div>

        <!-- Navigation Indicator -->
        <div class="carousel-nav">
            <button class="nav-btn nav-prev" id="navPrev" aria-label="Vorheriger Pass">‚Üê</button>
            <span class="nav-indicator" id="navIndicator">Pass 1/6</span>
            <button class="nav-btn nav-next" id="navNext" aria-label="N√§chster Pass">‚Üí</button>
        </div>
    </main>

    <!-- Onboarding Modal -->
    <div class="modal" id="onboardingModal">
        <div class="modal-content">
            <h2>Willkommen bei Clemi 2.0</h2>
            <p>F√ºr die Mess-P√§sse ben√∂tigen wir deine Startwerte:</p>

            <div class="form-group">
                <label for="startBauch">Bauchumfang:</label>
                <div class="input-wrapper">
                    <input type="number" id="startBauch" inputmode="decimal" step="0.1" placeholder="95">
                    <span class="unit">cm</span>
                </div>
            </div>

            <div class="form-group">
                <label for="startBrust">Brustumfang:</label>
                <div class="input-wrapper">
                    <input type="number" id="startBrust" inputmode="decimal" step="0.1" placeholder="100">
                    <span class="unit">cm</span>
                </div>
            </div>

            <div class="form-group">
                <label for="startGewicht">Gewicht:</label>
                <div class="input-wrapper">
                    <input type="number" id="startGewicht" inputmode="decimal" step="0.1" placeholder="85">
                    <span class="unit">kg</span>
                </div>
            </div>

            <div class="modal-actions">
                <button class="btn-secondary" id="skipOnboarding">Sp√§ter</button>
                <button class="btn-primary" id="completeOnboarding">Start</button>
            </div>
        </div>
    </div>

    <!-- Dietzie Modal -->
    <div class="modal" id="dietzieModal">
        <div class="modal-content">
            <button class="modal-close" id="closeDietzieModal" aria-label="Schlie√üen">√ó</button>
            <h2>Dietzie-Konto</h2>

            <div class="dietzie-display">
                <div class="dietzie-icons" id="dietzieIcons"></div>
                <p class="dietzie-available"><span id="dietzieAvailable">0</span> verf√ºgbar</p>
            </div>

            <button class="btn-primary btn-redeem" id="redeemBtn">Dietzie einl√∂sen</button>

            <div class="dietzie-history">
                <h3>Historie:</h3>
                <div class="history-list" id="dietzieHistory"></div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal" id="settingsModal">
        <div class="modal-content">
            <button class="modal-close" id="closeSettingsModal" aria-label="Schlie√üen">√ó</button>
            <h2>Einstellungen</h2>

            <div class="settings-section">
                <h3>Messwerte anpassen</h3>

                <div class="form-group">
                    <label for="settingsBauch">Bauchumfang Start:</label>
                    <div class="input-wrapper">
                        <input type="number" id="settingsBauch" inputmode="decimal" step="0.1">
                        <span class="unit">cm</span>
                    </div>
                </div>

                <div class="form-group">
                    <label for="settingsBrust">Brustumfang Start:</label>
                    <div class="input-wrapper">
                        <input type="number" id="settingsBrust" inputmode="decimal" step="0.1">
                        <span class="unit">cm</span>
                    </div>
                </div>

                <div class="form-group">
                    <label for="settingsGewicht">Gewicht Start:</label>
                    <div class="input-wrapper">
                        <input type="number" id="settingsGewicht" inputmode="decimal" step="0.1">
                        <span class="unit">kg</span>
                    </div>
                </div>

                <button class="btn-primary" id="saveSettings">Speichern</button>
            </div>

            <div class="settings-section">
                <h3>Daten</h3>
                <button class="btn-secondary" id="exportData">Daten exportieren (JSON)</button>
                <button class="btn-danger" id="resetApp">App komplett zur√ºcksetzen</button>
            </div>
        </div>
    </div>

    <!-- Measurement Input Modal -->
    <div class="modal" id="measurementModal">
        <div class="modal-content">
            <button class="modal-close" id="closeMeasurementModal" aria-label="Schlie√üen">√ó</button>
            <h2 id="measurementTitle">Messwert eingeben</h2>

            <div class="form-group">
                <label id="measurementLabel">Aktueller Wert:</label>
                <div class="input-wrapper">
                    <input type="number" id="measurementInput" inputmode="decimal" step="0.1" autofocus>
                    <span class="unit" id="measurementUnit">cm</span>
                </div>
            </div>

            <div class="measurement-info" id="measurementInfo"></div>

            <div class="modal-actions">
                <button class="btn-secondary" id="cancelMeasurement">Abbrechen</button>
                <button class="btn-primary" id="submitMeasurement">Speichern</button>
            </div>
        </div>
    </div>

    <!-- Completion Modal -->
    <div class="modal" id="completionModal">
        <div class="modal-content completion-content">
            <div class="bronze-badge">
                <svg width="80" height="80" viewBox="0 0 100 100">
                    <circle cx="50" cy="50" r="45" fill="var(--accent-bronze)" stroke="var(--bg-primary)" stroke-width="3"/>
                    <path d="M50 20 L60 45 L85 50 L60 55 L50 80 L40 55 L15 50 L40 45 Z" fill="var(--bg-primary)"/>
                </svg>
            </div>
            <h2>Belohnung freigeschaltet:</h2>
            <p class="reward-text">1√ó Dietzie</p>
            <p class="completion-message" id="completionMessage"></p>
            <button class="btn-primary" id="resetPassBtn">Pass neu starten</button>
        </div>
    </div>

    <!-- Confirm Dialog -->
    <div class="modal" id="confirmModal">
        <div class="modal-content">
            <h2 id="confirmTitle">Best√§tigung</h2>
            <p id="confirmMessage"></p>
            <div class="modal-actions">
                <button class="btn-secondary" id="confirmCancel">Abbrechen</button>
                <button class="btn-primary" id="confirmOk">Best√§tigen</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/storage.js"></script>
    <script src="js/audio.js"></script>
    <script src="js/passes.js"></script>
    <script src="js/dietzies.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
